{"version":3,"sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      <img src=\\\"assets/icon/favicon.png\\\" class=\\\"title-icon\\\">\\n      MGN Service\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n\\n  <!-- form iniziale -->\\n  <div id=\\\"startingForm\\\"\\n    *ngIf=\\\"!isLocating()\\\"\\n    >\\n    <ion-list>\\n      <ion-item>\\n        <ion-label>Operatore</ion-label>  <!-- selezione operatore -->\\n        <ion-select value=\\\"\\\"\\n          interface=\\\"action-sheet\\\"\\n          cancel-text=\\\"Annulla\\\"\\n          [(ngModel)]=\\\"operator\\\"\\n          >\\n          <ion-select-option *ngFor=\\\"let op of this.operators\\\" [value]=\\\"op\\\">{{ op.name }}</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n      <ion-item>\\n        <ion-label>Veicolo</ion-label>    <!-- selezione veicolo -->\\n        <ion-select value=\\\"\\\"\\n          interface=\\\"action-sheet\\\"\\n          cancel-text=\\\"Annulla\\\"\\n          [(ngModel)]=\\\"veichle\\\"\\n          >\\n          <ion-select-option *ngFor=\\\"let v of this.veichles\\\" [value]=\\\"v\\\">{{ v.title }}</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n\\n  <!-- geoLocaiton div -->\\n  <div id=\\\"geoLocator\\\"\\n    *ngIf=\\\"isLocating()\\\"\\n    >\\n\\n    <!-- results -->\\n    <div id=\\\"results\\\"\\n      *ngIf=\\\"error_code === 0\\\"\\n    >\\n      <br><br><br>\\n      <img src=\\\"assets/ani/locator.gif\\\" class=\\\"ani\\\">\\n      <br><br>\\n      <p>Procedi verso la tua destinazione...</p>\\n\\n      <br>\\n      <p>{{ geoData.latitude }}<br>{{ geoData.longitude }}</p>\\n      <br><p>accuracy: {{ geoData.accuracy }} mt</p>\\n      <br><p>{{ timestampToDateTime(geoData.timestamp) }}</p>\\n      <br><p>{{ locationProgress }}</p>\\n    </div>\\n\\n    <!-- error -->\\n    <div id=\\\"error\\\"\\n      *ngIf=\\\"error_code > 0\\\"\\n      >\\n      <p>{{ error_code }}</p>\\n      <p>{{ error_message }}</p>\\n    </div>\\n  </div>\\n</ion-content>\\n\\n\\n<!-- Footer -->\\n<ion-footer class=\\\"ion-no-border\\\">\\n  <ion-grid>\\n    <ion-row no-padding no-margin>\\n        <ion-col col-12 no-padding class=\\\"center\\\">\\n\\n          <!-- start button -->\\n          <ion-button\\n            *ngIf=\\\"!isLocating()\\\"\\n            (click)=\\\"startLocating()\\\"\\n            shape=\\\"round\\\"\\n          >Avvia</ion-button>\\n\\n          <!-- stop button -->\\n          <ion-button\\n            *ngIf=\\\"isLocating()\\\"\\n            (click)=\\\"stopLocating()\\\"\\n            shape=\\\"round\\\"\\n          >Stop</ion-button>\\n\\n        </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \".center {\\n  text-align: center;\\n}\\n\\nimg.title-icon {\\n  max-width: 32px;\\n}\\n\\n#geoLocator {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  height: 100%;\\n  transform: translateY(-50%);\\n}\\n\\n#geoLocator img.ani {\\n  width: 50%;\\n  max-width: 200px;\\n}\\n\\n#geoLocator p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#geoLocator a {\\n  text-decoration: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0VBQ0EsMkJBQUE7QUFDRjs7QUFDRTtFQUNFLFVBQUE7RUFDQSxnQkFBQTtBQUVKOztBQUFFO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtFQUNBLFNBQUE7QUFHSjs7QUFERTtFQUNFLHFCQUFBO0FBSUoiLCJmaWxlIjoiaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2VudGVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5pbWcudGl0bGUtaWNvbiB7XG4gIG1heC13aWR0aDozMnB4O1xufVxuXG4jZ2VvTG9jYXRvciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIGhlaWdodDoxMDAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG59XG4gICNnZW9Mb2NhdG9yIGltZy5hbmkge1xuICAgIHdpZHRoOiA1MCU7XG4gICAgbWF4LXdpZHRoOiAyMDBweDtcbiAgfVxuICAjZ2VvTG9jYXRvciBwIHtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgbGluZS1oZWlnaHQ6IDIycHg7XG4gICAgY29sb3I6ICM4YzhjOGM7XG4gICAgbWFyZ2luOiAwO1xuICB9XG4gICNnZW9Mb2NhdG9yIGEge1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgfVxuIl19 */\";","import { Component, NgZone } from '@angular/core';\nimport { LoadingController, Platform, AlertController } from '@ionic/angular';\n\nimport { Device } from '@ionic-native/device/ngx';\n\n// UniqueDeviceID (see https://ionicframework.com/docs/native/unique-device-id)\n// see also https://www.freakyjolly.com/ionic-4-get-unique-device-id-other-uids-of-uuid-imei-imsi-iccid-and-mac-using-native-cordova-plugins/\nimport { UniqueDeviceID } from '@ionic-native/unique-device-id/ngx';\nimport { Uid } from '@ionic-native/uid/ngx';\nimport { AndroidPermissions } from '@ionic-native/android-permissions/ngx';\n\n// ScreenOrientation (see https://ionicframework.com/docs/native/screen-orientation)\nimport { ScreenOrientation } from '@ionic-native/screen-orientation/ngx';\n\n// GeoLocation and GeoCoder\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { NativeGeocoder, NativeGeocoderResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder/ngx';\n\n// Http Request\nimport { HttpClient, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs/Observable';\nimport {catchError} from 'rxjs/operators';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n  // #region Variables\n    baseURL = 'https://jsonplaceholder.typicode.com'          // API End-point base url\n\n    operators = []                          // operatori\n    operator = ''\n    veichles = []                           // targhe veicoli\n    veichle = ''\n\n    // device\n    UUID: string = ''\n\n    // Location and Map Settings\n    locationInterval: number = 10           // interval to acquire GPS data\n    locationTimeout: number = 5            // location timeout seconds\n    tmr = null                              // location timer\n\n    // Location Data and results\n    locationProgress: any = 0             // location progress: 0=stopped;\n    locationErrors: any = 0               // location errors counter\n    locationEmpty: any = 0                // location empty (coords 0,0)\n\n    error_code: number = 0\n    error_message: string = ''\n\n    geoData = {                         // geoLocation result\n      latitude:  0,                     // latitude\n      longitude:  0,                    // longitude\n      accuracy:  0,                     // accuracy\n      timestamp:  0                     // timestamp\n    }\n  // #endregion Variables\n\n  // #region Constructors\n    constructor(\n      private platform: Platform,\n      private uniqueDeviceID: UniqueDeviceID,\n      private uid: Uid,\n      private device: Device,\n      private androidPermissions: AndroidPermissions,\n      private screenOrientation: ScreenOrientation,\n      private alertController: AlertController,\n      private loadingController: LoadingController,\n      private geolocation: Geolocation,\n      private nativeGeocoder: NativeGeocoder,\n      private httpClient: HttpClient\n    ) {\n      // Constructor\n\n      // Lock screen orientation\n      this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.LANDSCAPE_PRIMARY)\n\n      console.log('platform', this.device.platform)\n      console.log('version', this.device.version)\n      console.log('model', this.device.model)\n      console.log('manufacturer', this.device.manufacturer)\n      console.log('isVirtual', this.device.isVirtual)\n      console.log('serial', this.device.serial)\n\n      // detect orientation changes\n      this.screenOrientation.onChange().subscribe(\n        () => {\n            console.log(\"Orientation Changed\", this.screenOrientation.type);\n        }\n      );\n\n      // gets operators list\n      this.apiGet('/users/').then((result) => {\n        if (result != undefined) {\n\n          // overwrites operatori\n          result = [\n            {\n              name: 'BRANCHINI GIOVANNI MARIA'\n            },\n            {\n              name: 'ALBERTI LIDIA'\n            },\n            {\n              name: 'BICOCCHI STEFANIA'\n            }\n          ]\n          this.operators = result\n\n          // gets veichles list\n          this.apiGet('/todos/').then((result) => {\n            if (result != undefined) {\n\n              // overwrites veichles\n              result = [\n                {\n                  title: 'CITROEN C3 (XX123XX)'\n                },\n                {\n                  title: 'Fiat Punto (YY000YY)'\n                }\n              ]\n\n              this.veichles = result\n            } else {\n              // API Error\n              alert('errore API veichles')\n            }\n          })\n        } else {\n          // API Error\n          alert('errore API operatori')\n        }\n      })\n\n      // on Android, detects device UUID\n      if (this.platform.is('android')) {\n        this.uniqueDeviceID.get()\n        .then((uuid: any) => this.UUID = uuid)\n        .catch((error: any) => alert(JSON.stringify(error)));\n      }\n    }\n  // #endregion Constructors\n\n  // #region Public/Private Methods\n\n    // #region User Functions\n    async startLocating() {\n\n      // checks operator and veichle selection\n      if ((typeof this.operator === 'string') || (typeof this.veichle === 'string')) {\n        const alert = await this.alertController.create({\n          animated: true,\n          backdropDismiss: false,\n          header: 'Attenzione',\n          subHeader: 'Operatore e veicolo richiesti',\n          message: 'Operatore e veicolo sono entrambi richiesti per avviare il tragitto. Prego, seleziona operatore e veicolo',\n          buttons: ['OK']\n        });\n        await alert.present();\n        return\n      }\n\n      // start locating veichle\n      this.locationErrors = 0\n\n      // shows loader then calls API\n      this.getLoading('Verifica connessione...').then((loading) => {\n        loading.present(),\n\n        this.apiGet('/todos/1')\n          .then((result) => {\n            if (result != undefined) {\n              // API OK: checks GeoLocation service\n\n              loading.message = 'Verifica servizio GeoLocalizzazione...'\n\n              this.checkGeoLocationService()\n              .then((result) => {\n                // GeoLocation Service running\n                loading.dismiss()\n\n                // start locating\n                this.locate()\n                this.tmr = setInterval( ()=>{\n                  this.locate()\n                }, (this.locationInterval * 1000))\n\n              }).catch((error) => {\n                // GeoLocation Error {code:%, message:$}\n                loading.dismiss()\n                alert(error.message)\n              })\n            } else {\n              // API Error\n              loading.dismiss()     // closes loader\n            }\n          })\n      })\n    }\n    stopLocating() {\n      // stop locating veichle\n      this.locationProgress = 0\n      clearInterval(this.tmr)\n      this.tmr = 0\n    }\n    // #endregion User Functions\n\n    // #region Location Functions\n    isLocating() {\n      return (this.tmr > 0)\n    }\n    locationStatus() {\n      return this.locationProgress\n    }\n\n    async checkGeoLocationService(): Promise<any> {\n      // checks Geolocation service\n      let geoLocationOptions = {                        // geolocation options\n        timeout: (this.locationTimeout * 1000),\n        enableHighAccuracy: true,\n        maximumAge: 0               // no cached position\n      };\n      return new Promise((resolve, reject) => {\n        this.geolocation.getCurrentPosition(geoLocationOptions)\n        .then((data) => {\n          // getCurrentPosition result\n          resolve(data)\n        }).catch((error) => {\n          // getCurrentPosition error\n          reject(error)\n        })\n      })\n    }\n    locate() {\n      // locates the veichle\n      this.resetLocationData()\n\n      let geoLocationOptions = {                        // geolocation options\n        timeout: (this.locationTimeout * 1000),\n        enableHighAccuracy: true,\n        maximumAge: 0               // no cached position\n      };\n\n      this.geolocation.getCurrentPosition(geoLocationOptions)\n        .then((data) => {\n          // getCurrentPosition result\n          // es: 41.1954148 16.6165038\n\n          console.log('geolocation result', data.coords.latitude, data.coords.longitude, data.timestamp)\n\n          if (data.timestamp > 0) {\n            this.geoData.latitude = data.coords.latitude\n            this.geoData.longitude = data.coords.longitude\n            this.geoData.accuracy = Math.round(data.coords.accuracy)\n            this.geoData.timestamp =  data.timestamp\n\n            this.locationErrors = 0\n            this.locationEmpty = 0\n            this.locationProgress += 1\n          } else {\n            // location is empty\n            this.error_code = 0\n            this.error_message = 'location empty'\n          }\n        }).catch((error) => {\n          // getCurrentPosition error\n          this.error_code = error.code\n          this.error_message = error.message\n          this.locationErrors += 1\n        })\n    }\n    resetLocationData() {\n      // resets error\n      this.error_code = 0\n      this.error_message = ''\n\n      // resets data\n      /*\n      this.geoData.latitude = 0\n      this.geoData.longitude = 0\n      this.geoData.accuracy = 0\n      this.geoData.timestamp = 0\n      */\n    }\n    // #endregion Location Functions\n\n    // #region Map Functions\n    /*\n    initMap(lat?: number, lng?:number) {\n      // initializes map\n      if (lat == undefined) lat = 0\n      if (lng == undefined) lng = 0\n\n      const map = new Map('geoLocator').setView([lat, lng], this.mapZoomLevel);\n\n      this.mapInit = true\n    }\n    refreshMap(lat: number, lng:number) {\n      // refresh map\n      if (lat == undefined) lat = 0\n      if (lng == undefined) lng = 0\n\n      const map = Map('geoLocator')\n      map.setView([lat, lng], 23)\n\n      const m = new marker([lat, lng])\n      m.addTo(map)\n      console.log('refreshMap')\n    }\n    */\n    openMapAPP() {\n      // opens map APP\n      // Android: geo:41.1954148,16.6165038\n      // iOS:     maps://maps.apple.com/?q=41.1954148,16.6165038\n      let url = '';\n\n      if (this.platform.is('android')) {\n        url = 'geo:' + this.geoData.latitude + ',' + this.geoData.longitude\n      }\n      if (this.platform.is('desktop')) {\n        url = 'maps://maps.apple.com/?q=' + this.geoData.latitude + ',' + this.geoData.longitude\n      }\n      if (url != '')\n        window.open(url)\n      else\n        alert('cannot open maps')\n    }\n    // #endregion\n\n    // #region Http Functions\n    async apiGet(uri): Promise<any> {\n      return new Promise((resolve, reject) => {\n        this.httpClient.get(this.baseURL + uri).subscribe((response) => {\n          resolve(response);\n        }, (err) => {\n          reject(err);\n        })\n      })\n      .catch((err) => {\n      });\n    }\n    // #endregion Http Functions\n\n    // #region Utils Functions\n    async getLoading(message?: string, duration?: number) {\n      // returns a loading object\n      if (message == undefined) message = 'Please wait...'\n      if (duration == undefined) duration = 10000\n\n      const loading = await this.loadingController.create({\n        message: message,\n        duration: duration,\n        showBackdrop: true\n      });\n      return loading\n    }\n\n    timestampToDateTime(ts) {\n      return new Date(ts) //.toLocaleDateString(\"it-IT\")\n    }\n    // #endregion Utils Functions\n\n  // #endregion Public/Private Methods\n}\n"],"sourceRoot":"webpack:///"}