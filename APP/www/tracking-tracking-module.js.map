{"version":3,"sources":["./src/app/tracking/tracking-routing.module.ts","./src/app/tracking/tracking.page.ts","./src/app/tracking/tracking.page.scss","./src/app/tracking/tracking.module.ts","./src/app/tracking/tracking.page.html"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACc;AAER;AAE/C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2DAAY;KACxB;CACF,CAAC;IAMW,yBAAyB,SAAzB,yBAAyB;CAAG;AAA5B,yBAAyB;IAJrC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,yBAAyB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBI;AACiB;AAEF;AAEzD,uBAAuB;AACqB;AACA;AACI;AACU;AACE;AACJ;AACP;IAOpC,YAAY,SAAZ,YAAY;IAMvB,uBAAuB;IAEvB,sBAAsB;IACtB;IACE,eAAe;IACR,GAAe,EACd,GAAe,EACf,KAAmB,EACnB,UAA6B,EAC7B,WAA+B,EAC/B,SAA2B,EAC3B,KAAoB;IAE5B,UAAU;IACH,QAAkB,EAClB,OAAsB;QAE7B,sBAAsB;QAZf,QAAG,GAAH,GAAG,CAAY;QACd,QAAG,GAAH,GAAG,CAAY;QACf,UAAK,GAAL,KAAK,CAAc;QACnB,eAAU,GAAV,UAAU,CAAmB;QAC7B,gBAAW,GAAX,WAAW,CAAoB;QAC/B,cAAS,GAAT,SAAS,CAAkB;QAC3B,UAAK,GAAL,KAAK,CAAe;QAGrB,aAAQ,GAAR,QAAQ,CAAU;QAClB,YAAO,GAAP,OAAO,CAAe;QAnB/B,oBAAoB;QACpB,YAAO,GAAW,CAAC;QACnB,cAAS,GAAW,EAAE;QACtB,YAAO,GAAO,EAAE;QAoBd,uCAAuC;QACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;IAC1D,CAAC;IACD,yBAAyB;IAGzB,8BAA8B;IAC9B,eAAe;QAEb,IAAI,CAAC,SAAS,EAAE;QAEhB,WAAW,CAAC,GAAG,EAAE;YACf,IAAI,CAAC,SAAS,EAAE;QAClB,CAAC,EAAE,wEAAW,CAAC,gBAAgB,GAAG,IAAI,CAAC,CAAC;IAC1C,CAAC;IACD,iCAAiC;IAEjC,yBAAyB;IACzB,KAAK;IAEL,CAAC;IACD,GAAG;QACD,qCAAqC;QACrC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,wEAAW,CAAC,gBAAgB,CAAC;IAC/C,CAAC;IAED,SAAS;QACP;;WAEG;QAEH,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;YACtC,kBAAkB;YAElB,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,IAAI,CAAC,OAAO,GAAG,IAAI;gBACnB,IAAI,CAAC,OAAO,EAAE;aACf;YACD,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAAC;YAExC,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC;iBAC9C,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;gBACf,sBAAsB;gBACtB,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,MAAM,CAAC;YAEhD,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;gBACjB,YAAY;gBACZ,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC;YACtB,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACjB,qBAAqB;YACrB,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,KAAK,CAAC;QAC5C,CAAC,CAAC;IACJ,CAAC;CAKF;;YAhGQ,uDAAU;YACV,uDAAU;YACV,2DAAY;YACZ,qEAAiB;YACjB,wEAAkB;YAClB,oEAAgB;YAChB,6DAAa;YATE,uDAAQ;YAAvB,4DAAa;;AAgBT,YAAY;IALxB,+DAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,gFAAmC;;KAEpC,CAAC;GACW,YAAY,CAmFxB;AAnFwB;;;;;;;;;;;;;ACnBzB;AAAe,2EAAY,uBAAuB,gBAAgB,iBAAiB,iBAAiB,6BAA6B,gBAAgB,sBAAsB,uBAAuB,GAAG,6CAA6C,+hBAA+hB,E;;;;;;;;;;;;;;;;;;;;;;ACApuB;AACM;AACF;AAEA;AAEyB;AAEvB;IAWlC,kBAAkB,SAAlB,kBAAkB;CAAG;AAArB,kBAAkB;IAT9B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,kFAAyB;SAC1B;QACD,YAAY,EAAE,CAAC,2DAAY,CAAC;KAC7B,CAAC;GACW,kBAAkB,CAAG;AAAH;;;;;;;;;;;;;ACnB/B;AAAe,iNAAkJ,iBAAiB,0MAA0M,oBAAoB,YAAY,qBAAqB,YAAY,oBAAoB,YAAY,qBAAqB,YAAY,WAAW,07BAA07B,E","file":"tracking-tracking-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TrackingPage } from './tracking.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TrackingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TrackingPageRoutingModule {}\n","import { Component } from '@angular/core';\nimport { environment } from \"src/environments/environment\";\n\nimport { NavController, Platform } from '@ionic/angular';\n\n// WebArtigiani Classes\nimport { AppService } from '../Classes/App';\nimport { ApiService } from '../Classes/API';\nimport { UtilsService } from '../Classes/Utils';\nimport { ComponentsService } from '../Classes/Components';\nimport { GeoLocationService } from '../Classes/GeoLocation';\nimport { LocalDataService } from '../Classes/LocalData';\nimport { PhoneServices } from '../Classes/Phone';\n\n@Component({\n  selector: 'app-tracking',\n  templateUrl: './tracking.page.html',\n  styleUrls: ['./tracking.page.scss'],\n})\nexport class TrackingPage {\n\n  // #region Variables\n  counter: number = 0\n  sessionID: string = ''\n  gpsData:any = {}\n  // #endregion Variables\n\n  // #region Constructor\n  constructor(\n    // WebArtigiani\n    public app: AppService,\n    private api: ApiService,\n    private utils: UtilsService,\n    private components: ComponentsService,\n    private geolocation: GeoLocationService,\n    private localData: LocalDataService,\n    private phone: PhoneServices,\n\n    // Angular\n    public platform: Platform,\n    public navCtrl: NavController\n  ) {\n    // Constructor code...\n\n    // gets current session_id from storage\n    this.sessionID = this.localData.readValue('session_id');\n  }\n  // #endregion Constructor\n\n\n  // #region Component LifeCycle\n  ngAfterViewInit() {\n\n    this.geoLocate()\n\n    setInterval(() => {\n      this.geoLocate()\n    }, environment.LOCATION_INERVAL * 1000);\n  }\n  // #endregion Component LifeCycls\n\n  // #region Public Methods\n  dummy() {\n\n  }\n  SOS() {\n    // starts a calling to the SOS number\n    this.phone.call(environment.SOS_PHONE_NUMBER)\n  }\n\n  geoLocate() {\n    /**\n     * Geo-locate the device\n     */\n\n    this.geolocation.locate().then((data) => {\n      // Geo-location OK\n\n      if (data.valid) {\n        this.gpsData = data\n        this.counter++\n      }\n      console.log('Geo-location result', data)\n\n      this.api.continueTracking(this.sessionID, data)\n      .then((result) => {\n        // tracking-data saved\n        console.log('Geo-location API result', result)\n\n      }).catch((error) => {\n        // API Error\n        console.error(error)\n      });\n    }).catch((error) => {\n      // geo-location error\n      console.error('Geo-location error', error)\n    })\n  }\n  // #endregion Public Methods\n\n  // #region Private Methods\n  // #endregion Private Methods\n}\n","export default \"div#debug {\\n  position: absolute;\\n  width: 100%;\\n  height: 80px;\\n  bottom: 80px;\\n  background-color: orange;\\n  color: blue;\\n  font-size: 0.75em;\\n  font-style: italic;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3RyYWNraW5nLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQUNGIiwiZmlsZSI6InRyYWNraW5nLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImRpdiNkZWJ1ZyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6MTAwJTtcbiAgaGVpZ2h0OjgwcHg7XG4gIGJvdHRvbTo4MHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBvcmFuZ2U7XG4gIGNvbG9yOmJsdWU7XG4gIGZvbnQtc2l6ZTogLjc1ZW07XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbn1cbiJdfQ== */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TrackingPageRoutingModule } from './tracking-routing.module';\n\nimport { TrackingPage } from './tracking.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TrackingPageRoutingModule\n  ],\n  declarations: [TrackingPage]\n})\nexport class TrackingPageModule {}\n","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      <img src=\\\"assets/icon/favicon.png\\\" class=\\\"title-icon\\\">\\n      {{ app.appName() }}\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\" class=\\\"center\\\">\\n\\n  <!-- debug GPS data -->\\n  <div id=\\\"debug\\\"\\n    *ngIf=\\\"app.debugGPS()\\\"\\n    >\\n    {{ gpsData.latitude }}<br>\\n    {{ gpsData.longitude }}<br>\\n    {{ gpsData.accuracy }}<br>\\n    {{ gpsData.timestamp }}<br>\\n    {{ counter }}\\n  </div>\\n\\n</ion-content>\\n\\n<!-- Footer -->\\n<ion-footer class=\\\"ion-no-border\\\">\\n  <ion-grid>\\n    <ion-row no-padding no-margin>\\n        <ion-col col-12 no-padding class=\\\"center\\\">\\n\\n          <!-- pause button -->\\n          <ion-button\\n            (click)=\\\"dummy()\\\"\\n            shape=\\\"round\\\"\\n            size=\\\"large\\\"\\n            class=\\\"btn-app yellow\\\"\\n          >\\n            <ion-icon name=\\\"pause\\\"></ion-icon>\\n          </ion-button>\\n\\n          <ion-button\\n            (click)=\\\"dummy()\\\"\\n            shape=\\\"round\\\"\\n            size=\\\"large\\\"\\n            class=\\\"btn-app red\\\"\\n          ><ion-icon name=\\\"log-out\\\"></ion-icon></ion-button>\\n\\n          <!-- SOS Caller -->\\n          <ion-button\\n            (click)=\\\"SOS()\\\"\\n            shape=\\\"round\\\"\\n            size=\\\"large\\\"\\n            class=\\\"btn-app red\\\"\\n          >SOS</ion-button>\\n        </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-footer>\\n\";"],"sourceRoot":"webpack:///"}